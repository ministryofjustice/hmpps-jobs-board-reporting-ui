<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h3 class="govuk-heading-m" data-qa="latestApplicationsHeader">
      Latest recorded application status
    </h3>
    <p class="govuk-body govuk-!-margin-bottom-6" data-qa="latestApplicationsContent">Shows latest recorded status for each open application in the reporting period.</p>

    <div class="govuk-tabs" data-module="govuk-tabs">
      <h2 class="govuk-tabs__title">
        Contents
      </h2>
      <ul class="govuk-tabs__list" role="tablist">
        <li class="govuk-tabs__list-item govuk-tabs__list-item--selected" role="presentation">
          <a class="govuk-tabs__tab" href="#latest-applications-chart" id="tab_latest-applications-chart" role="tab" aria-controls="latest-applications-chart" aria-selected="true" tabindex="0" data-qa="latestApplicationsChartTab">
            Latest application status chart view
          </a>
        </li>
        <li class="govuk-tabs__list-item" role="presentation">
          <a class="govuk-tabs__tab" href="#latest-applications-table" id="tab_latest-applications-table" role="tab" aria-controls="latest-applications-table" aria-selected="false" tabindex="-1" data-qa="latestApplicationsTableTab">
            Latest application status table view
          </a>
        </li>
      </ul>
      <div class="govuk-tabs__panel govuk-!-padding-right-8 govuk-!-padding-bottom-8" id="latest-applications-chart" role="tabpanel" aria-labelledby="tab_latest-applications-chart">
        {{ barChart('latestApplicationsChart','Latest application status chart view', latestApplicationsByStage , 'applicationStatus', 'numberOfApplications') }}
      </div>

      <div class="govuk-tabs__panel govuk-tabs__panel--hidden" id="latest-applications-table" role="tabpanel" aria-labelledby="tab_latest-applications-table" data-qa="latestApplicationsTable">
        <table class="govuk-table">
          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th scope="col" class="govuk-table__header">Application status</th>
              <th scope="col" class="govuk-table__header">Total</th>
            </tr>
          </thead>
          <tbody class="govuk-table__body">
            {% for entry in latestApplicationsByStage%}
            <tr class="govuk-table__row">
              <td class="govuk-table__cell">{{ entry.applicationStatus }}</td>
              <td class="govuk-table__cell">{{ entry.numberOfApplications }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>